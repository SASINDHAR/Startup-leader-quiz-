<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Startup Adventure ‚Äî Are You Ready? (Fun Final)</title>
  <style>
    :root{--bg:#071029;--card:#071625;--accent:#ff6b6b;--accent2:#ffd166;--muted:#9aa4b2;--glass: rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;color:#f6fbff;background:radial-gradient(circle at 10% 10%, #05233b 0%, #071029 40%, #02121a 100%);}    
    .wrap{max-width:980px;margin:20px auto;padding:18px}
    header{display:flex;align-items:center;gap:14px}
    .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;color:white;font-weight:900;font-size:22px;box-shadow:0 6px 30px rgba(0,0,0,0.6)}
    h1{font-size:20px;margin:0}
    p.lead{color:var(--muted);margin:6px 0 16px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:14px;box-shadow:0 8px 40px rgba(2,6,23,0.6);border:1px solid rgba(255,255,255,0.03)}

    .question-area{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:12px}
    .qbox{padding:16px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));border:1px solid rgba(255,255,255,0.02)}
    .options{display:flex;flex-direction:column;gap:12px;margin-top:16px}
    .opt{background:var(--glass);padding:14px;border-radius:10px;cursor:pointer;border:1px solid rgba(255,255,255,0.02);transition:transform .12s ease,box-shadow .12s,background .12s}
    .opt:hover{transform:translateY(-6px);box-shadow:0 12px 40px rgba(0,0,0,0.6)}
    .opt.active{outline:3px solid rgba(255,255,255,0.06);background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))}
    .meta{color:var(--muted);font-size:13px;margin-top:10px}

    .side{position:relative}
    .progress{height:16px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden;margin-bottom:12px}
    .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2));transition:width .4s ease}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#071029;font-weight:700;border:none;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
    .small{font-size:13px;padding:8px 10px;border-radius:8px}

    .result{padding:14px;border-radius:12px;margin-top:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));color:#f6fbff}
    .result h2{margin:0 0 8px}
    .breakdown{display:flex;flex-direction:column;gap:10px;margin-top:12px}
    .barSmall{height:12px;background:rgba(255,255,255,0.02);border-radius:999px;overflow:hidden}
    .barSmall > i{display:block;height:100%}

    .badges{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    .badge{background:rgba(255,255,255,0.03);padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,0.02);font-weight:700}

    .leader{margin-top:12px}
    .leader table{width:100%;border-collapse:collapse}
    .leader th, .leader td{padding:8px;text-align:left;border-bottom:1px dashed rgba(255,255,255,0.03);font-size:13px}

    footer{color:var(--muted);font-size:13px;margin-top:16px;text-align:center}

    .confetti{position:fixed;pointer-events:none;inset:0;z-index:40}

    @media (max-width:880px){.question-area{grid-template-columns:1fr;}.side{order:2}.wrap{padding:12px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo">‚ö°Ô∏è</div>
      <div>
        <h1>Startup Adventure ‚Äî Are You Ready?</h1>
        <p class="lead">A playful, workshop-ready quiz about leadership styles in early-stage startups. Fun animations, badges, and mini-challenges ‚Äî leaderboard appears after finish.</p>
      </div>
    </header>

    <div class="card" id="game">
      <div class="question-area">
        <div class="qbox" id="mainBox">
          <div class="meta">Question <span id="qnum">1</span> of <span id="qtot">7</span></div>
          <h2 id="question" style="margin-top:8px">Loading...</h2>

          <div class="options" id="options"></div>

          <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap;align-items:center">
            <button class="btn" id="nextBtn">Next ‚ûú</button>
            <button class="btn secondary small" id="prevBtn">‚óÇ Prev</button>
            <button class="btn secondary small" id="resetBtn">Reset</button>
            <button class="btn secondary small" id="hintBtn">Surprise Hint</button>
            <div id="timerWrap" style="margin-left:auto;color:var(--muted);font-weight:700">‚è± <span id="timer">--</span></div>
          </div>
        </div>

        <div class="side">
          <div class="progress" title="Progress"><div class="bar" id="bar"></div></div>

          <div class="card" style="padding:12px;margin-bottom:12px;">
            <strong>Playful Meter</strong>
            <div style="font-size:18px;margin-top:8px" id="playMeter">Curious</div>
            <div class="meta">Your choices shape the adventure ‚Äî badges unlock at the end.</div>
          </div>

          <div id="hint" class="card" style="padding:12px;">
            <strong>Quick tip</strong>
            <p class="meta" id="tip">Choose honestly ‚Äî surprises happen!</p>
          </div>

          <div id="resultBox" style="display:none" class="result">
            <h2 id="resultTitle">Adventure Result</h2>
            <p id="resultText"></p>

            <div class="badges" id="badges"></div>

            <div class="breakdown" id="breakdown"></div>

            <div id="leaderboardWrapper" class="leader" style="display:none">
              <strong>Local leaderboard</strong>
              <div style="margin-top:8px;display:flex;gap:8px;align-items:center">
                <input id="playerName" placeholder="Your name" class="small" style="flex:1" />
                <button class="btn small" id="saveScoreBtn">Save to Leaderboard</button>
              </div>
              <div style="margin-top:8px;">
                <table id="leaderTable"><thead><tr><th>Name</th><th>Type</th><th>When</th></tr></thead><tbody></tbody></table>
              </div>
              <div style="margin-top:8px;display:flex;gap:8px">
                <button class="btn secondary small" id="exportBtn">Export JSON</button>
                <button class="btn secondary small" id="importBtn">Import JSON</button>
                <input type="file" id="importFile" style="display:none" accept="application/json" />
                <button class="btn secondary small" id="clearBtn">Clear Leaderboard</button>
              </div>
            </div>

          </div>
        </div>
      </div>

      <footer>
        Built for workshops ‚Ä¢ Drop this file into a GitHub repo and enable Pages to share.
      </footer>
    </div>
  </div>

  <canvas class="confetti" id="confettiCanvas"></canvas>

  <audio id="popSound" src="data:audio/wav;base64,UklGRhQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA="></audio>

  <script>
    // ---------- FUN CONFIG ----------
    const questions = [
      {q: "Your team misses an important deadline. What do you do?",
       opts: [
         {t:"Create a strict plan and assign tasks directly.", style:'A'},
         {t:"Hold a team meeting to discuss what went wrong.", style:'B'},
         {t:"Motivate the team with encouragement and new solutions.", style:'C'},
         {t:"Let everyone decide how to fix it.", style:'D'}
       ]},
      {q: "You get a new startup idea late at night. What's your first move?",
       opts: [
         {t:"Tell the team to start building immediately.", style:'A'},
         {t:"Ask for everyone's feedback to refine it.", style:'B'},
         {t:"Craft and share a compelling vision about the future.", style:'C'},
         {t:"Ask people to explore different approaches independently.", style:'D'}
       ]},
      {q: "Two team members are in conflict. How do you handle it?",
       opts: [
         {t:"Directly intervene and settle the issue.", style:'A'},
         {t:"Arrange a discussion to find a shared solution.", style:'B'},
         {t:"Coach both sides to learn and grow from it.", style:'C'},
         {t:"Ignore it and hope they resolve it themselves.", style:'D'}
       ]},
      {q: "A funding round falls through. Immediate reaction?",
       opts: [
         {t:"Take control and make fast decisions.", style:'A'},
         {t:"Discuss options with the team before acting.", style:'B'},
         {t:"Encourage creative pivots and keep morale up.", style:'C'},
         {t:"Let each member handle their own tasks independently.", style:'D'}
       ]},
      {q: "A new junior hires asks for guidance. You...",
       opts: [
         {t:"Give strict instructions to avoid mistakes.", style:'A'},
         {t:"Involve them in planning and ask for input.", style:'B'},
         {t:"Mentor and inspire them to grow quickly.", style:'C'},
         {t:"Tell them to start however they feel comfortable.", style:'D'}
       ]},
      {q: "Your product is getting negative user feedback. You...",
       opts: [
         {t:"Pivot immediately and change course.", style:'A'},
         {t:"Brainstorm fixes with the whole team.", style:'B'},
         {t:"Re-motivate the team and iterate creatively.", style:'C'},
         {t:"Let teams independently test their own fixes.", style:'D'}
       ]},
      {q: "The team asks for more autonomy. You respond by...",
       opts: [
         {t:"Keeping the same structure ‚Äî control is important.", style:'A'},
         {t:"Negotiating and adjusting freedom gradually.", style:'B'},
         {t:"Empowering them fully and trusting their judgment.", style:'C'},
         {t:"Giving maximum freedom immediately.", style:'D'}
       ]}
    ];

    // scoring: counts per style (no sum shown during play)
    let pos = 0; const total = questions.length; let selections = Array(total).fill(null);
    const perStyle = {A:0,B:0,C:0,D:0};

    // DOM refs
    const qnum = document.getElementById('qnum');
    const qtot = document.getElementById('qtot'); qtot.textContent = total;
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    const resetBtn = document.getElementById('resetBtn');
    const hintBtn = document.getElementById('hintBtn');
    const bar = document.getElementById('bar');
    const playMeter = document.getElementById('playMeter');
    const tip = document.getElementById('tip');
    const timerEl = document.getElementById('timer');
    const resultBox = document.getElementById('resultBox');
    const resultTitle = document.getElementById('resultTitle');
    const resultText = document.getElementById('resultText');
    const breakdownEl = document.getElementById('breakdown');
    const badgesEl = document.getElementById('badges');
    const leaderboardWrapper = document.getElementById('leaderboardWrapper');

    const playerName = document.getElementById('playerName');
    const saveScoreBtn = document.getElementById('saveScoreBtn');
    const leaderTableBody = document.querySelector('#leaderTable tbody');
    const exportBtn = document.getElementById('exportBtn');
    const importBtn = document.getElementById('importBtn');
    const importFile = document.getElementById('importFile');
    const clearBtn = document.getElementById('clearBtn');

    const confettiCanvas = document.getElementById('confettiCanvas');
    const popSound = document.getElementById('popSound');

    // playful timer settings
    let timer = null; let timeLeft = 0; const QUESTION_TIME = 20; // seconds per question

    function startTimer(){ clearInterval(timer); timeLeft = QUESTION_TIME; timerEl.textContent = timeLeft + 's'; timer = setInterval(()=>{ timeLeft--; timerEl.textContent = timeLeft + 's'; if(timeLeft<=0){ clearInterval(timer); autoSkip(); } },1000); }
    function stopTimer(){ clearInterval(timer); timerEl.textContent = '--'; }

    function autoSkip(){ // auto-skip and give playful nudge
      if(selections[pos]===null) selections[pos] = -1; // marked skipped
      nextBtn.click(); flashTip('Time\'s up ‚Äî we skipped for you!'); }

    function render(){
      qnum.textContent = pos+1;
      const q = questions[pos];
      questionEl.textContent = q.q;
      optionsEl.innerHTML = '';
      q.opts.forEach((o,i)=>{
        const div = document.createElement('div'); div.className='opt'; div.tabIndex=0;
        div.innerHTML = `<strong>${String.fromCharCode(65+i)}.</strong> ${o.t}`;
        if(selections[pos]===i) div.classList.add('active');
        div.onclick = ()=>{ selections[pos]=i; animateSelect(div); Array.from(optionsEl.children).forEach(c=>c.classList.remove('active')); div.classList.add('active'); playPop(); updatePlayMeter(); }
        optionsEl.appendChild(div);
      });
      bar.style.width = `${(pos/total)*100}%`;
      resultBox.style.display='none'; leaderboardWrapper.style.display='none'; startTimer(); updateTip(); }

    function animateSelect(el){ el.animate([{transform:'scale(1)'},{transform:'scale(1.02)'},{transform:'scale(1)'}],{duration:260}); }
    function playPop(){ try{ popSound.currentTime=0; popSound.play(); }catch(e){} }

    function updateTip(){ const tips = [ 'Be bold!', 'Ask: what matters most here?', 'Conflict is a chance to learn', 'Speed matters, but communicate', 'Teach one thing well', 'Listen to users', 'Start with clear goals' ]; tip.textContent = tips[pos] || ''; }

    function updatePlayMeter(){ // playful label based on choices selected so far
      const counts = {A:0,B:0,C:0,D:0}; selections.forEach((s,idx)=>{ if(s===null || s===-1) return; const st = questions[idx].opts[s].style; counts[st]++; });
      // decide label
      const keys = Object.keys(counts).sort((x,y)=>counts[y]-counts[x]); const top = keys[0]; let label = 'Curious';
      if(top==='C') label = 'Visionary';
      if(top==='B') label = 'Collaborator';
      if(top==='A') label = 'Commander';
      if(top==='D') label = 'Free Spirit';
      playMeter.textContent = label;
    }

    nextBtn.addEventListener('click', ()=>{
      // if no selection, ask to confirm
      if(selections[pos]===null){ if(!confirm('No answer selected ‚Äî continue anyway?')) return; }
      // record style count for the answered questions (we don't show sum)
      if(selections[pos] >=0){ const style = questions[pos].opts[selections[pos]].style; perStyle[style]++; }
      if(pos < total-1){ pos++; render(); } else { finishAdventure(); }
    });
    prevBtn.addEventListener('click', ()=>{ if(pos>0){ // if user goes back, reduce the perStyle count for current answered question
        if(selections[pos] >=0){ const style = questions[pos].opts[selections[pos]].style; perStyle[style] = Math.max(0, perStyle[style]-1); }
        pos--; render(); } });

    resetBtn.addEventListener('click', ()=>{ if(!confirm('Reset your adventure?')) return; pos=0; selections=Array(total).fill(null); perStyle.A=perStyle.B=perStyle.C=perStyle.D=0; render(); stopTimer(); updatePlayMeter(); });

    hintBtn.addEventListener('click', ()=>{ surpriseHint(); });
    function surpriseHint(){ const hints = ['A surprise investor likes decisive moves üíº','Teams love recognition üéâ','Prototype quickly and test','Listen ‚Äî then act','Mentor one person today','Users tell the truth']; flashTip(hints[Math.floor(Math.random()*hints.length)]); }
    function flashTip(t){ const el = document.getElementById('tip'); el.textContent = t; el.animate([{opacity:0},{opacity:1}],{duration:400}); setTimeout(updateTip,2500); }

    // finish
    function finishAdventure(){ stopTimer(); // compute breakdown
      resultBox.style.display='block'; bar.style.width='100%';
      // compute percentages by style
      const totalAnswered = perStyle.A + perStyle.B + perStyle.C + perStyle.D;
      const pct = (n)=> totalAnswered ? Math.round((n/totalAnswered)*100) : 0;
      // friendly interpretation ‚Äî not a raw sum
      let title = '', text='';
      if(perStyle.C >= Math.max(perStyle.A, perStyle.B, perStyle.D) && perStyle.C >= 2) { title='üî• Startup Visionary!'; text='You spark ideas and motivate people ‚Äî a natural founder vibe.'; }
      else if(perStyle.B >= Math.max(perStyle.A, perStyle.C, perStyle.D) && perStyle.B >= 2) { title='ü§ù Team Builder'; text='You build buy-in and strong culture ‚Äî invaluable in early teams.'; }
      else if(perStyle.A >= Math.max(perStyle.B, perStyle.C, perStyle.D) && perStyle.A >= 2) { title='‚ö°Ô∏è Decisive Captain'; text='You take charge and move fast ‚Äî great for steering through crises.'; }
      else if(perStyle.D >= Math.max(perStyle.A, perStyle.B, perStyle.C) && perStyle.D >= 2) { title='üåø Free Innovator'; text='You trust autonomy and creativity ‚Äî great with mature teams.'; }
      else { title='üß≠ Hybrid Starter'; text='You show a balanced mix ‚Äî flexible and adaptable depending on the situation.'; }

      resultTitle.textContent = title; resultText.textContent = text;

      // badges
      badgesEl.innerHTML = '';
      if(perStyle.C >= 2) addBadge('Vision Badge', 'Leads with a future-focused mindset');
      if(perStyle.B >= 2) addBadge('Teamwork Badge', 'Builds trust and collaboration');
      if(perStyle.A >= 2) addBadge('Decisive Badge', 'Makes fast, clear choices');
      if(perStyle.D >= 2) addBadge('Freedom Badge', 'Trusts teams to deliver');
      if(totalAnswered === 0) addBadge('Curious Badge', 'Took the short path ‚Äî try again!');

      // breakdown display (colorful)
      breakdownEl.innerHTML = '';
      const styles = [ {k:'A',name:'Autocratic',col:'#ff9f43',val:perStyle.A}, {k:'B',name:'Democratic',col:'#06b6d4',val:perStyle.B}, {k:'C',name:'Transformational',col:'#7c3aed',val:perStyle.C}, {k:'D',name:'Laissez-Faire',col:'#94a3b8',val:perStyle.D} ];
      styles.forEach(s=>{
        const wrapper = document.createElement('div'); wrapper.innerHTML = `<div style="display:flex;justify-content:space-between"><strong>${s.name}</strong><span>${s.val} responses</span></div>`;
        const barWrap = document.createElement('div'); barWrap.className='barSmall';
        const inner = document.createElement('i'); inner.style.width = (totalAnswered? Math.round((s.val/totalAnswered)*100):0) + '%'; inner.style.background = s.col; inner.style.display='block'; barWrap.appendChild(inner);
        wrapper.appendChild(barWrap);
        breakdownEl.appendChild(wrapper);
      });

      // save last result
      window.lastResult = { type: title, summary: text, perStyle: {...perStyle}, when: new Date().toISOString() };

      // fun: confetti for strong results
      if(perStyle.C + perStyle.B >= 3) fireConfetti();

      // show leaderboard controls now
      leaderboardWrapper.style.display = 'block'; renderLeaderboard();
    }

    function addBadge(title,desc){ const b = document.createElement('div'); b.className='badge'; b.title = desc; b.textContent = title; badgesEl.appendChild(b); }

    // confetti
    function fireConfetti(){ const ctx = confettiCanvas.getContext('2d'); confettiCanvas.width = innerWidth; confettiCanvas.height = innerHeight; const pieces = []; for(let i=0;i<160;i++){ pieces.push({x:Math.random()*confettiCanvas.width, y:Math.random()*-confettiCanvas.height, vx:(Math.random()-0.5)*4, vy:Math.random()*3+2, s:Math.random()*6+4, c:['#ffd166','#ff6b6b','#06b6d4','#7c3aed'][Math.floor(Math.random()*4)]}); }
      let t=0; function frame(){ ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height); for(const p of pieces){ p.x += p.vx; p.y += p.vy; p.vy += 0.05; ctx.fillStyle = p.c; ctx.fillRect(p.x, p.y, p.s, p.s*1.6); if(p.y > confettiCanvas.height){ p.y = -20; p.x = Math.random()*confettiCanvas.width; p.vy = Math.random()*3+1; } } t++; if(t < 500) requestAnimationFrame(frame); else ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height); } frame(); }

    // leaderboard (localStorage simple, no numeric score shown here ‚Äî only type and time)
    const LS_KEY = 'startup_quiz_leaderboard_fun_v1';
    function loadLeaderboard(){ try{ const raw = localStorage.getItem(LS_KEY); return raw ? JSON.parse(raw) : []; }catch(e){return [];} }
    function saveLeaderboard(list){ localStorage.setItem(LS_KEY, JSON.stringify(list)); }
    function renderLeaderboard(){ const list = loadLeaderboard(); leaderTableBody.innerHTML = ''; list.slice().reverse().forEach(r=>{ const tr = document.createElement('tr'); tr.innerHTML = `<td>${escapeHtml(r.name)}</td><td>${escapeHtml(r.type)}</td><td>${new Date(r.when).toLocaleString()}</td>`; leaderTableBody.appendChild(tr); }); }

    saveScoreBtn.addEventListener('click', ()=>{
      if(!window.lastResult){ alert('Finish the quiz to save your result.'); return; }
      const name = (playerName.value || 'Player').trim(); const entry = {name, type: window.lastResult.type, when: new Date().toISOString(), perStyle: window.lastResult.perStyle};
      const list = loadLeaderboard(); list.push(entry); saveLeaderboard(list); renderLeaderboard(); alert('Saved to local leaderboard.');
    });

    exportBtn.addEventListener('click', ()=>{ const list = loadLeaderboard(); const data = JSON.stringify(list, null, 2); const blob = new Blob([data], {type:'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'startup_quiz_leaderboard_fun.json'; a.click(); URL.revokeObjectURL(url); });
    importBtn.addEventListener('click', ()=>{ importFile.click(); });
    importFile.addEventListener('change', (e)=>{ const f = e.target.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = (ev)=>{ try{ const data = JSON.parse(ev.target.result); if(Array.isArray(data)){ saveLeaderboard(data); renderLeaderboard(); alert('Leaderboard imported.'); } else alert('Invalid file format.'); } catch(err){ alert('Import failed: '+err.message); } }; reader.readAsText(f); });
    clearBtn.addEventListener('click', ()=>{ if(confirm('Clear the local leaderboard?')){ saveLeaderboard([]); renderLeaderboard(); } });

    function escapeHtml(s){ return String(s).replace(/[&<>\"']/g, function(m){return {'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;',"'":'&#39;'}[m]; }); }

    // start
    render(); updatePlayMeter();

    // keyboard
    document.addEventListener('keydown', (e)=>{ if(e.key === 'ArrowRight') nextBtn.click(); if(e.key === 'ArrowLeft') prevBtn.click(); if(e.key === 'h') surpriseHint(); });

    // onboarding: small tip
    (function onboarding(){ if(localStorage.getItem('startup_fun_seen')) return; setTimeout(()=>{ alert('Tip: Each question has a 20s playful timer. Use "Surprise Hint" for a fun nudge. Leaderboard appears after finish.'); localStorage.setItem('startup_fun_seen','1'); },600); })();
  </script>
</body>
</html>
